/********************************************************
 * GHL AGENCY — GLOBAL CSS (v4)
 * Last updated: 2025-10-15
 * Goals: tokens, auto+manual dark mode, a11y, safer overrides
 ********************************************************/

/* =========================
   0) BASE & NORMALIZE LITE
   ========================= */
   *, *::before, *::after { box-sizing: border-box; }
   html, body { height: 100%; }
   body { margin: 0; font-synthesis-weight: none; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
   img, svg, video { max-width: 100%; height: auto; }
   
   /* =========================
      1) TOKENS (THEME / DESIGN)
      ========================= */
   :root {
     /* ---- Brand Palette ---- */
     --brand-50:  #f0f7ff;
     --brand-100: #ffffff;
     --brand-200: #d6eaff;
     --brand-300: #a8d0ff;
     --brand-400: #71aef8;
     --brand-500: #188bf6; /* Primary */
     --brand-600: #004ab1; /* Secondary */
     --brand-700: #0e3462; /* Tertiary */
     --brand-800: #091f3f;
     --brand-900: #000000;
   
     /* ---- Semantic ---- */
     --surface-0:  #ffffff;
     --surface-1:  #f8fafc;
     --surface-2:  #eef2f7;
     --text-1:     #0b1220;
     --text-2:     #2a3135;
     --text-on-brand: #ffffff;
     --border-1:   #e5e7eb;
     --border-2:   #bdbdbd;
   
     /* ---- Status ---- */
     --info-500:   var(--brand-500);
     --error-500:  #ef3924;
     --error-600:  #c92a27;
   
     /* ---- Layout / Elevation ---- */
     --radius-xs:  .25rem;
     --radius-sm:  .375rem;
     --radius-md:  .5rem;
     --radius-lg:  .75rem;
     --radius-xl:  1rem;
   
     --space-1: .25rem;
     --space-2: .5rem;
     --space-3: .75rem;
     --space-4: 1rem;
     --space-5: 1.25rem;
     --space-6: 1.5rem;
   
     --shadow-1:  0 1px 2px rgba(0,0,0,.08), 0 1px 1px rgba(0,0,0,.06);
     --shadow-2:  0 4px 6px -1px rgba(0,0,0,.10), 0 2px 4px -2px rgba(0,0,0,.10);
     --shadow-lg: 0 10px 15px -3px rgba(0,0,0,.10), 0 4px 6px -4px rgba(0,0,0,.10);
   
     /* ---- Motion ---- */
     --easing-standard: cubic-bezier(.2,0,0,1);
     --t-fast: 120ms var(--easing-standard);
     --t-med:  220ms var(--easing-standard);
     --t-slow: 420ms var(--easing-standard);
   
     /* ---- Z-Index ---- */
     --z-1: 1;
     --z-2: 9;
     --z-3: 99;
     --z-4: 999;
   
     /* ---- Sidebar math ---- */
     --sidebar-width-expanded: 15.5rem;
     --sidebar-width-collapsed: 5rem;
     --sidebar-width: var(--sidebar-width-expanded);
     --sidebar-outline: 3px solid var(--brand-500);
   
     /* ---- Brand gradient ---- */
     --brand-gradient: linear-gradient(145deg, var(--brand-700) 0%, var(--brand-800) 35%);
   
     /* ---- Login (scoped) ---- */
     --login-bg:              #ffffff;
     --login-bg-image: url('https://storage.googleapis.com/msgsndr/c2DjRsOo4e13Od6ZTU6S/media/678eee6cdf3b76b4d056611a.png');
     --login-button-bg:       var(--brand-500);
     --login-button-hover:    var(--brand-600);
     --login-button-text:     var(--text-on-brand);
   
     /* ---- Map Brand -> GHL primary scale ---- */
     --primary-50:  var(--brand-50);
     --primary-100: var(--brand-100);
     --primary-200: var(--brand-200);
     --primary-300: var(--brand-300);
     --primary-400: var(--brand-400);
     --primary-500: var(--brand-500);
     --primary-600: var(--brand-600);
     --primary-700: var(--brand-700);
     --primary-800: var(--brand-800);
     --primary-900: var(--brand-900);
   
     /* Back-compat aliases */
     --brand-primary:   var(--brand-500);
     --brand-secondary: var(--brand-700);
     --brand-tertiary:  var(--brand-800);
   }
   
   /* Collapse -> update sidebar width token */
   .sidebar-v2-location.v2-collapse,
   .sidebar-v2-agency.v2-collapse {
     --sidebar-width: var(--sidebar-width-collapsed);
   }
   
   /* =========================
      2) ACCESSIBILITY & MOTION
      ========================= */
   @media (prefers-reduced-motion: reduce) {
     * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
   }
   
   /* Accent color for form controls */
   input[type="checkbox"],
   input[type="radio"],
   progress,
   meter { accent-color: var(--brand-500); }
   
   /* Focus visible: solid ring + soft halo (with graceful @supports) */
   :focus-visible {
     outline: 2px solid var(--brand-500);
     outline-offset: 2px;
     box-shadow: 0 0 0 3px rgba(24,139,246,0.15);
   }
   @supports (outline-color: color-mix(in srgb, white 30%, var(--brand-500))) {
     :focus-visible {
       outline-color: color-mix(in srgb, var(--brand-500) 70%, white);
       box-shadow: 0 0 0 3px color-mix(in srgb, var(--brand-500) 20%, transparent);
     }
   }
   
   /* High contrast / forced colors */
   @media (forced-colors: active) {
     :focus-visible { outline: 2px solid CanvasText; box-shadow: none; }
   }
   
   /* RTL nudges */
   [dir="rtl"] #sidebar-v2 #backButtonv2 { margin-right: .5rem; margin-left: auto; }
   
   /* =========================
      3) REQUESTED HARD HIDES
      ========================= */
   /* — What's New badge (Ad Manager) */
   #feature-discovery-whats-new-badge,
   [id="feature-discovery-whats-new-badge"] { display: none !important; }
   
   /* — Entire HL header */
   header.hl_header,
   .hl_header { display: none !important; }
   
   /* — Sidebar items to hide */
   #sb_app-marketplace,
   #sb_reporting,
   #sb_reputation { display: none !important; }
   
   /* — Quick Actions (bolt) */
   #quickActions { display: none !important; }
   
   /* Legacy/promo hides (resilient fallbacks) */
   #location-dashboard_banner--wordpress-promo-container,
   [id$="--wordpress-promo-container"],
   #location-dashboard_banner--yext-promo-container,
   [id$="--yext-promo-container"],
   #sb_launchpad,
   #notification_banner-top_bar,
   #sb_ai-employee-promo,
   [id*="ai-employee-promo"],
   [id="sb_AI Agents"],
   #sb_AI\ Agents,
   a[href*="ai-employee"],
   a[href*="Summer%20of%20AI"] { display: none !important; }
   
   /* Utility */
   .shadow-lg { box-shadow: var(--shadow-lg) !important; }
   
   /* =========================
      4) LOGIN PAGE
      ========================= */
   .hl_login {
     background-color: var(--login-bg) !important;
     background-image: var(--login-bg-image) !important;
     background-size: cover !important;
     background-position: center !important;
   
     display: flex !important;
     flex-direction: column !important;
     justify-content: center !important;
     align-items: center !important;
     margin: 0 auto !important;
     padding: 0 !important;
     height: 100dvh;
   }
   .hl_login--header { background: transparent !important; border-bottom: none !important; padding: 0 !important; margin-bottom: 20px !important; }
   .hl_login--body {
     max-width: 450px !important; width: 100% !important;
     background: var(--surface-0) !important; border-radius: var(--radius-lg) !important; box-shadow: var(--shadow-2) !important;
   }
   .hl_login--body .card { width: 100% !important; max-width: 100% !important; margin: 0 auto !important; box-shadow: none !important; padding: 0 !important; }
   .hl_login--body .card .card-body { width: 100% !important; margin: 0 auto; padding: 50px 0; }
   .hl_login .form-control {
     background: #fff !important; font-size: .95rem; color: var(--text-2);
     border: 1px solid var(--border-2) !important; border-radius: var(--radius-sm) !important; padding: 10px !important;
   }
   .hl_login--body .login-card-heading { margin-bottom: 20px; text-align: center; }
   .hl_login--body .heading2 { margin-bottom: 10px; font-size: 25px; font-weight: 700; color: var(--text-1); }
   
   /* Unified login buttons */
   .hl_login .btn.btn-blue,
   .hl_login .btn.btn-blue:active,
   .hl_login .btn.btn-blue:focus,
   .hl_login button {
     background-color: var(--login-button-bg) !important;
     border-color: var(--login-button-bg) !important;
     color: var(--login-button-text) !important;
     min-height: 55px; transition: background-color var(--t-med);
   }
   .hl_login .hover\:bg-curious-blue-600:hover,
   .hl_login .btn.btn-blue:hover,
   .hl_login button:hover {
     background-color: var(--login-button-hover) !important;
     border-color: var(--login-button-hover) !important;
   }
   
   /* =========================
      5) HEADER NAV RE-ORDER
      ========================= */
   #sidebar-v2 .hl_nav-header nav[aria-label="header"] {
     display: flex !important; flex-direction: column !important;
   }
   /* “Get Started” first; “90-Min Bootcamp” second */
   #sidebar-v2 .hl_nav-header nav[aria-label="header"] a[id="739b3ff6-ab98-4bf6-89aa-424902629503"] { order: -9999 !important; }
   #sidebar-v2 .hl_nav-header nav[aria-label="header"] a[id="fac5c7e0-af50-423c-b3e1-ee1fdffd37e8"] { order: -9998 !important; }
   
   /* =========================
      6) SIDEBAR & LAYOUT
      ========================= */
   .sidebar-v2-agency #sidebar-v2 .default-bg-color,
   .sidebar-v2-agency #sidebar-v2.default-bg-color,
   .sidebar-v2-location #sidebar-v2 .default-bg-color,
   .sidebar-v2-location #sidebar-v2.default-bg-color {
     background: var(--brand-gradient) !important;
     padding: 0;
   }
   
   /* Floating Sidebar */
   .sidebar-v2-agency aside,
   .sidebar-v2-location aside {
     margin: var(--space-4);
     border-radius: var(--radius-xl);
     outline: var(--sidebar-outline);
     z-index: var(--z-3);
     height: calc(100svh - 2rem);
   }
   
   /* Agency Logo container */
   .agency-logo-container { background-color: transparent; margin-bottom: 3rem !important; }
   .object-contain.agency-logo { height: auto !important; min-height: 3rem; }
   
   /* Aside pop-out + overlay */
   aside .overflow-hidden.lead-connector { overflow: visible; }
   #sidebar-overlay,
   #sidebar-overlay[data-v-2485ce78],
   .permission-modal-backdrop {
     background: transparent !important;
     opacity: 1 !important;
     backdrop-filter: blur(2px) brightness(0.75) !important;
   }
   
   /* Location switcher pop-out position */
   .sidebar-v2-agency #sidebar-v2 #location-switcher-sidbar-v2 .hl_v2-location_switcher,
   .sidebar-v2-location #sidebar-v2 #location-switcher-sidbar-v2 .hl_v2-location_switcher {
     top: 0 !important;
     right: -432px !important;
   }
   
   /* Back button */
   #sidebar-v2 #backButtonv2 {
     border-radius: 100vw; padding: .5em 1em !important; line-height: 1;
     margin-left: .5rem; margin-right: auto;
   }
   
   /* Search bars (if present) */
   .sidebar-v2-location #sidebar-v2 :is(#globalSearchOpener, #quickActions) :is(.search-icon, .search-placeholder, .search-shortcut) {
     color: #ffffff !important;
   }
   .sidebar-v2-location #sidebar-v2 :is(#globalSearchOpener, #quickActions) .hl_v2-quick-actions-list { padding: 1rem 0; }
   .sidebar-v2-location #sidebar-v2 :is(#globalSearchOpener, #quickActions) .hl_v2-quick-actions-item { border-color: var(--primary-500); }
   
   /* Side menu scaffolding */
   #sidebar-v2 :is(.hl_nav-header-without-footer nav, .lead-connector nav) { padding: .5rem; }
   nav.flex-1 a,
   .hl_nav-header nav a,
   .hl_nav-settings nav a,
   .hl_nav-header-without-footer nav a {
     border-radius: var(--radius-md);
     outline: 1px solid transparent;
     padding: .5rem !important;
     transition: margin var(--t-slow), background-color var(--t-med), outline-color var(--t-fast);
   }
   
   /* Hover + Active */
   .hl_nav-header nav a:hover,
   .hl_nav-settings nav a:hover,
   .hl_nav-header-without-footer nav a:hover {
     background: transparent !important;
     outline: 1px solid hsla(0, 0%, 100%, 0.5);
   }
   .hl_nav-header nav a.active,
   .hl_nav-settings nav a.active,
   .hl_nav-header-without-footer nav a.active {
     background: linear-gradient(90deg, var(--brand-700) 0%, var(--brand-500) 100%) !important;
     margin: .25rem 0;
   }
   
   /* Menu title sizing */
   aside header .topmenu-nav { flex-wrap: wrap !important; }
   aside header .topmenu-nav .topmenu-navtitle { flex-basis: 100% !important; }
   aside header .topmenu-nav .topmenu-navtitle,
   .sidebar-v2-agency .menu-title,
   .sidebar-v2-location .menu-title {
     font-size: clamp(1.75rem, 1.15rem + 1.5vw, 2.5rem) !important;
     font-weight: 700 !important;
     letter-spacing: -0.025em; line-height: 1.5em;
   }
   
   /* Settings/utility cluster */
   .sidebar-v2-location #sidebar-v2 :is(#globalSearchOpener, #quickActions, #backButtonv2, #location-switcher-sidbar-v2) {
     background-color: transparent !important;
     border: 1px solid var(--brand-500) !important;
     backdrop-filter: brightness(100%) blur(.25rem);
     position: relative;
   }
   
   /* Sticky settings area */
   .sidebar-v2-location #sidebar-v2 .hl_nav-settings,
   .sidebar-v2-agency  #sidebar-v2 .hl_nav-settings {
     backdrop-filter: blur(16px);
     position: sticky !important;
     border-radius: var(--radius-xl);
     margin-top: auto;
     margin-bottom: 24px;
   }
   
   /* Collapse button */
   .sidebar-v2-agency #sidebar-v2 .hl_collapse-button,
   .sidebar-v2-location #sidebar-v2 .hl_collapse-button {
     background-color: #ffffff; color: var(--brand-900);
   }
   
   /* =========================
      7) MAIN CONTENT
      ========================= */
   /* Use single source of truth for width against sidebar */
   .sidebar-v2-agency .hl_header,
   .sidebar-v2-agency .hl_wrapper,
   .sidebar-v2-location .hl_header,
   .sidebar-v2-location .hl_wrapper {
     top: 0; right: 0;
     width: calc(100vw - var(--sidebar-width));
     border: none; box-shadow: none;
   }
   
   /* When collapsed, same math */
   .sidebar-v2-location.v2-collapse :is(.hl_header--collapse, .hl_wrapper, .hl_wrapper--inner, .hl_wrapper--inner.form-builder-list) {
     width: calc(100vw - var(--sidebar-width));
   }
   
   /* Backgrounds */
   .sidebar-v2-agency .hl_wrapper section,
   #launchpad-app-v2[data-v-f5270004],
   .bg-gray-50,
   .bg-gray-100,
   body { background-color: var(--surface-0) !important; }
   
   .w-full section > div,
   section.w-full > div { width: auto !important; }
   
   .sidebar-v2-location :is(.hl_wrapper--inner, .hl_topbar-tabs, .hl_wrapper) { width: 100% !important; }
   
   /* Section Headings */
   .hl-display-sm-medium,
   .hl-display-sm-medium#text,
   .text-[30px].font-medium.text-gray-900,
   .title,
   .hl-header,
   .hl-header-content,
   .hl-title-container {
     font-weight: 600 !important;
     letter-spacing: 0 !important;
     color: var(--text-1);
   }
   
   /* Active Tab / aria-current */
   .sidebar-v2-location .hl_header .topmenu-nav .topmenu-navitem.active,
   [aria-current="page"] {
     border-color: var(--brand-900) !important;
     color: var(--brand-900) !important;
   }
   
   /* =========================
      8) BUTTONS / BADGES / TABS / ALERTS
      ========================= */
   /* Progress / fills */
   .n-progress-graph-line-fill,
   .bg-curious-blue-600,
   .view.active::after { background-color: var(--brand-500) !important; }
   
   /* Highlights */
   .vs__dropdown-option--highlight,
   .n-tabs .n-tabs-bar,
   .n-date-panel .n-date-panel-dates .n-date-panel-date.n-date-panel-date--selected::after {
     background-color: var(--brand-800) !important;
   }
   
   /* Convert platform blues to brand */
   .text-\[\#004EEB\],
   .text-\[\#004eeb\],
   .n-tabs.n-tabs--line-type .n-tabs-tab.n-tabs-tab--active,
   .n-tabs.n-tabs--bar-type .n-tabs-tab.n-tabs-tab--active,
   .text-primary-400,
   .text-primary-500,
   .text-primary-600,
   .text-primary-700,
   .text-blue-700,
   .text-curious-blue-500,
   .views span.active,
   .n-alert .n-alert__icon,
   .n-tabs.n-tabs--line-type .n-tabs-tab:hover,
   .n-tabs.n-tabs--bar-type .n-tabs-tab:hover {
     color: var(--brand-500) !important;
   }
   
   /* Borders -> brand/black for stronger framing */
   .border-primary-500,
   .border-b-blue-700,
   .focus\:ring-curious-blue-500:focus,
   .focus\:border-curious-blue-500:focus,
   .sidebar-v2-location #sidebar-v2 #location-switcher-sidbar-v2 .hl_v2-location_switcher .hl_account.active,
   ul.header-ul li.active a,
   .\!border-primary-600 { border-color: var(--brand-900) !important; }
   
   /* Shapes & badges */
   .sidebar-v2-location #sidebar-v2 #location-switcher-sidbar-v2 .hl_v2-location_switcher #switcher-agency-switch svg rect { fill: var(--brand-500) !important; }
   .n-badge.n-badge--dot img { filter: brightness(0); }
   
   /* Primary buttons */
   button.bg-apple-500,
   button.n-button--primary-type {
     color: var(--text-on-brand) !important;
     background-color: var(--brand-500) !important;
     border-color: var(--brand-500) !important;
   }
   
   /* “Black” buttons */
   .bg-primary-600 {
     color: var(--text-on-brand) !important;
     background-color: var(--brand-900) !important;
     border-color: var(--brand-900) !important;
   }
   
   /* Pills / dashboard states */
   .bg-primary-50,
   .views span.active,
   .count,
   .quick-filter-bar .advanced-container .button.active,
   .n-alert,
   .sidebar-v2-location .hl_header .topmenu-nav .topmenu-navitem a:hover,
   .sidebar-v2-location .hl_header .topmenu-nav .topmenu-navitem li a:hover {
     color: var(--brand-500) !important;
     background-color: var(--brand-50) !important;
     border-color: var(--brand-300) !important;
   }
   
   /* =========================
      9) FORMS & ERRORS
      ========================= */
   :is(
     [type="date"],
     [type="datetime-local"],
     [type="email"],
     [type="month"],
     [type="number"],
     [type="password"],
     [type="search"],
     [type="tel"],
     [type="text"],
     [type="time"],
     [type="url"],
     [type="week"],
     select,
     textarea
   ) {
     outline: none; box-shadow: none;
     border-radius: var(--radius-sm);
     border: 1px solid var(--border-1);
     background: #fff; color: var(--text-2);
   }
   
   :is(
     [type="date"],
     [type="datetime-local"],
     [type="email"],
     [type="month"],
     [type="number"],
     [type="password"],
     [type="search"],
     [type="tel"],
     [type="text"],
     [type="time"],
     [type="url"],
     [type="week"],
     select,
     textarea
   ):focus {
     border-color: var(--brand-500) !important;
     box-shadow: 0 0 0 3px color-mix(in srgb, var(--brand-500) 22%, transparent);
   }
   
   /* WebKit autofill cleanup */
   input:-webkit-autofill {
     -webkit-box-shadow: 0 0 0px 1000px #fff inset !important;
     -webkit-text-fill-color: var(--text-2) !important;
   }
   
   /* Error banners */
   .hl_error {
     background: linear-gradient(180deg, var(--error-500) 0%, var(--error-600) 100%) !important;
     border-bottom: 3px solid var(--error-500); color: #fff;
   }
   .hl_error .close-icon {
     border: 1px solid #ffffff; border-radius: 100vw; width: 1.5rem; height: 1.5rem;
     display: flex; justify-content: center; align-items: center;
   }
   
   /* =========================
      10) TYPOGRAPHY POLISH
      ========================= */
   .hl-display-sm-medium,
   .hl-display-sm-medium#text,
   .text-[30px].font-medium.text-gray-900,
   .title,
   .hl-header,
   .hl-header-content,
   .hl-title-container { color: var(--text-1); }
   
   /* =========================
      11) EXTRA ICON TINTS
      ========================= */
   .icon-pencil { color: var(--brand-500) !important; }
   
   /* =========================
      12) DARK MODE (AUTO + MANUAL)
      ========================= */
   /* Manual dark: add data-theme="dark" on :root or body */
   :root[data-theme="dark"] {
     color-scheme: dark;
     --surface-0:  #0e1420;
     --surface-1:  #121a29;
     --surface-2:  #1a2436;
     --text-1:     #eef3fb;
     --text-2:     #cdd6e6;
     --border-1:   #263248;
     --border-2:   #31405a;
     --brand-gradient: linear-gradient(145deg, #0a2240 0%, #07162a 35%);
     --login-bg:   #0e1420;
     --login-button-bg:     var(--brand-500);
     --login-button-hover:  color-mix(in srgb, var(--brand-500) 78%, black);
   }
   @media (prefers-color-scheme: dark) {
     :root:not([data-theme="light"]) {
       color-scheme: dark;
       --surface-0:  #0e1420;
       --surface-1:  #121a29;
       --surface-2:  #1a2436;
       --text-1:     #eef3fb;
       --text-2:     #cdd6e6;
       --border-1:   #263248;
       --border-2:   #31405a;
       --brand-gradient: linear-gradient(145deg, #0a2240 0%, #07162a 35%);
       --login-bg:   #0e1420;
       --login-button-bg:     var(--brand-500);
       --login-button-hover:  color-mix(in srgb, var(--brand-500) 78%, black);
     }
   }
   
   /* Dark component adjustments */
   @media (prefers-color-scheme: dark) {
     .sidebar-v2-agency #sidebar-v2 .default-bg-color,
     .sidebar-v2-agency #sidebar-v2.default-bg-color,
     .sidebar-v2-location #sidebar-v2 .default-bg-color,
     .sidebar-v2-location #sidebar-v2.default-bg-color {
       background: var(--brand-gradient) !important;
     }
     body,
     .sidebar-v2-agency .hl_wrapper section,
     #launchpad-app-v2[data-v-f5270004],
     .bg-gray-50, .bg-gray-100 { background-color: var(--surface-0) !important; }
   
     nav.flex-1 a,
     .hl_nav-header nav a,
     .hl_nav-settings nav a,
     .hl_nav-header-without-footer nav a { color: var(--text-2); }
   }
   
   /* =========================
      13) RESPONSIVE & PRINT
      ========================= */
   @media (max-width: 1024px) {
     .sidebar-v2-agency aside,
     .sidebar-v2-location aside { margin: var(--space-3); }
     .hl_login--body { max-width: 92vw !important; }
   }
   
   @media print {
     * { box-shadow: none !important; background: transparent !important; }
     body { color: #000; }
   }